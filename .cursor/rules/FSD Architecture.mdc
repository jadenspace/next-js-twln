# TWLN 프로젝트 아키텍처 가이드

## 프로젝트 개요

- **프로젝트명**: TWLN (Feature Sliced Design App)
- **기술 스택**: Next.js 15, React 19, TypeScript, Supabase, TanStack Query, Zustand, Tailwind CSS
- **아키텍처**: Feature Sliced Design (FSD) 패턴 적용

## FSD 아키텍처 레이어 구조

### 1. App Layer (`src/app/`)

- Next.js App Router 기반 페이지 라우팅
- 레이아웃과 글로벌 설정 관리
- 주요 페이지: `/`, `/login`, `/admin`, `/auth/*`, `/reset-password`

### 2. Pages Layer (`src/pages/`)

- 현재 비어있음 (App Router 사용으로 인해 미사용)
- 향후 필요시 페이지별 비즈니스 로직 포함 가능

### 3. Widgets Layer (`src/widgets/`)

- 독립적인 UI 블록들
- 현재 구조: `header/`, `sidebar/`
- 페이지 레벨의 복합 컴포넌트

### 4. Features Layer (`src/features/`)

- 비즈니스 기능별 모듈화
- 각 기능은 독립적인 폴더 구조를 가짐

**현재 구현된 기능들:**

- `auth/`: 인증 관련 기능
  - `api/`: auth-api.ts, admin-api.ts, approval-api.ts
  - `hooks/`: use-auth.ts (TanStack Query 기반)
  - `model/`: auth-store.ts (Zustand 상태 관리)
- `profile/`: 사용자 프로필 관리

### 5. Entities Layer (`src/entities/`)

- 비즈니스 엔티티 정의
- 도메인 모델과 타입 정의

**현재 구현된 엔티티들:**

- `auth/`: 인증 관련 엔티티
- `user/`: 사용자 관련 엔티티
  - `model/types.ts`: UserProfile, UserState 타입 정의

### 6. Shared Layer (`src/shared/`)

- 공통으로 사용되는 코드
- 외부 라이브러리 설정 및 유틸리티

**구조:**

- `api/`: 공통 API 설정
- `config/`: 설정 파일들
- `lib/`:
  - `providers/`: React Query Provider
  - `stores/`: 전역 상태 관리
  - `supabase/`: Supabase 클라이언트 설정 (client.ts, server.ts, middleware.ts)
- `types/`: 공통 타입 정의 (auth.ts, index.ts)
- `ui/`: 공통 UI 컴포넌트 (button.tsx)

### 7. Components Layer (`src/components/`)

- 재사용 가능한 UI 컴포넌트
- shadcn/ui 기반 컴포넌트들
- 현재: `ui/input.tsx`, `ui/label.tsx`

## FSD 아키텍처 원칙

### Import 규칙

- **상위 레이어는 하위 레이어만 import 가능**
- `app` → `pages`, `widgets`, `features`, `entities`, `shared`, `components`
- `pages` → `widgets`, `features`, `entities`, `shared`, `components`
- `widgets` → `features`, `entities`, `shared`, `components`
- `features` → `entities`, `shared`, `components`
- `entities` → `shared`, `components`
- `shared` → `components`
- `components` → 다른 레이어 import 금지

### 레이어별 역할 명확화

- **app**: 라우팅과 레이아웃만 담당
- **pages**: 페이지별 비즈니스 로직
- **widgets**: 독립적인 UI 블록
- **features**: 비즈니스 기능 구현
- **entities**: 도메인 모델 정의
- **shared**: 공통 코드 및 설정
- **components**: 재사용 컴포넌트

## 파일 명명 규칙

### 컴포넌트

- PascalCase 사용 (예: `UserProfile.tsx`)
- 컴포넌트명은 명확하고 구체적으로 작성

### 훅

- camelCase with `use` prefix (예: `useAuth.ts`)
- 커스텀 훅은 기능을 명확히 표현하는 이름 사용

### 유틸리티 및 API

- camelCase 사용 (예: `authApi.ts`)
- 기능을 명확히 표현하는 이름 사용

### 타입 정의

- PascalCase 사용 (예: `UserProfile.ts`)
- 인터페이스는 명확하고 구체적인 이름 사용

## 개발 워크플로우

### 새로운 기능 추가 시

1. `features/` 폴더에 기능별 폴더 생성
2. 필요한 경우 `entities/`에 도메인 모델 추가
3. API 레이어에서 데이터 접근 로직 구현
4. 훅을 통한 상태 관리 로직 구현
5. 컴포넌트에서 UI 구현

### 공통 컴포넌트 추가 시

1. `components/ui/`에 재사용 가능한 컴포넌트 배치
2. shadcn/ui 패턴 따르기
3. TypeScript 타입 명시적 정의

### 라우트 추가 시

1. `app/` 폴더에 라우트 폴더 생성
2. 필요시 미들웨어에서 인증 체크 추가
3. 페이지별 비즈니스 로직은 해당 feature에서 관리
